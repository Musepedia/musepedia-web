<!-- QA问答页面 -->
<include src="/pages/helpers/page-meta.wxml"/>

<view class="qa">
  <message-component 
    id="qa-message-component"
    class="{{guideClass}}"
    bindsendmessage="onMessage" 
    binddetailtap="showDetailTextPopup"
    bindrefresh="fetchHistory" 
    show-pending-message="{{pendingMessages > 0}}"
    messages="{{messages}}">
  </message-component>
  <van-toast id="van-toast"></van-toast>
</view>


<!-- 测试component -->
<exhibit-popup-info show="{{displayInfo}}" 
content="{{exhibitDescription}}"
title="{{exhibitLabel}}"
url="{{exhibitUrl}}"/>


<van-popup 
    class="detail-text-popup"
    show="{{showDetailText}}" 
    bind:close="closeDetailTextPopup"
    position="bottom" 
    closeable 
    round 
    close-on-click-overlay>
  <view class="detail-text">
    <rich-text nodes="{{detailText}}"></rich-text>
  </view>
</van-popup>

<van-popup 
    show="{{showSwitchMuseumPopup}}" 
    close-on-click-overlay="{{false}}"
    custom-style="width: 80%"
    round >
  <view style="text-align: center; padding: 18px 10px;">
    <view style="font-size: 1.125rem;">您还未选择博物馆</view>
    <view style="display:flex; margin-top: 16px">
      <van-button 
          style="width:100%"
          type="primary"
          custom-style="width:80%;height:32px"
          bindtap="closeSwitchMuseumPopup"
          round>前往选择</van-button>
    </view>
  </view>
</van-popup>

<view if="{{showGuide}}" id="guide" class="guide">
  <modal z="{{10000}}" opacity="{{0.5}}"></modal>
  <van-button class="guide-skip" type="primary" round>跳过</van-button>
  <view class="guide-hint" style="top: {{guideTop}}; left: {{guideLeft}};">
    <view class="guide-text">{{guides[guideStep].text}}</view>
    <view class="guide-action">
      <van-button type="primary" round wx:if="{{guideStep}}" bindtap="onGuidePrev">上一步</van-button>
      <van-button type="primary" round bindtap="onGuideNext">{{guideStep === guides.length - 1 ? '完成' : '下一步'}}</van-button>
    </view>
  </view>
</view>
